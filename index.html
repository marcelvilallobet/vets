<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ResTech — Demo con chat Project llar BCN</title>
  <meta name="description" content="Demo web con widget de chat para Project llar BCN (muebles a medida en Barcelona)." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><text y='50' x='6' font-size='50'>⚙️</text></svg>'">
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    .glass{backdrop-filter:saturate(140%) blur(10px);background:rgba(255,255,255,.06);} 
    .rad{background: radial-gradient(1200px 600px at 20% -10%, rgba(59,130,246,.25), transparent 60%),radial-gradient(1000px 700px at 120% 20%, rgba(99,102,241,.2), transparent 60%),linear-gradient(180deg, #0b1220, #090f1a);} 
  </style>
</head>
<body class="rad text-gray-100">
  <!-- Contenido existente de la web puede quedarse igual -->
  <header class="sticky top-0 z-40 bg-black bg-opacity-30 backdrop-filter backdrop-blur border-b border-white border-opacity-10">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="#" class="flex items-center space-x-2 font-semibold">
        <span class="text-2xl">⚙️</span>
        <span class="tracking-tight">ResTech</span>
      </a>
      <button id="openChat" class="ml-auto inline-flex items-center gap-2 bg-white text-gray-900 px-4 py-2 rounded-lg font-medium hover:opacity-90">
        💬 Hablar con Project llar BCN
      </button>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-16">
    <h1 class="text-4xl md:text-5xl font-extrabold">Demo con chat para <span class="text-blue-400">Project llar BCN</span></h1>
    <p class="mt-4 text-gray-300">El contenido de tu web puede ser el que ya tienes. Aquí solo integramos el chat en castellano.</p>
  </main>

  <footer class="py-10 border-t border-white border-opacity-10 text-center text-sm text-gray-400">
    <div class="max-w-6xl mx-auto px-4">
      <p>© <span id="year"></span> ResTech.</p>
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <!-- Chat n8n -->
  <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
  <div id="n8n-chat"></div>
  <script type="module">
    import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

    // === CONFIGURA AQUÍ TU WEBHOOK DE n8n ===
    const WEBHOOK_URL = 'https://n8n.srv1012314.hstgr.cloud/webhook/39d1aa67-2c49-4738-8321-f6de1c7af638/chat';

    const chat = createChat({
      webhookUrl: WEBHOOK_URL,
      webhookConfig: {
        method: 'POST',
        headers: {}
      },
      target: '#n8n-chat',
      mode: 'window', // ventana flotante
      chatInputKey: 'chatInput',
      chatSessionKey: 'sessionId',
      loadPreviousSession: true,
      metadata: {
        brand: 'Project llar BCN',
        vertical: 'muebles_a_medida',
        city: 'Barcelona'
      },
      showWelcomeScreen: false,
      defaultLanguage: 'es',
      initialMessages: [
        '¡Hola! 👋',
        'Soy el asistente de Project llar BCN. Diseñamos, fabricamos e instalamos muebles a medida en Barcelona. ¿Qué necesitas?'
      ],
      i18n: {
        es: {
          title: '¡Hola! 👋',
          subtitle: 'Cuéntanos tu proyecto: armarios, cocinas, muebles a medida…',
          footer: '',
          getStarted: 'Nueva conversación',
          inputPlaceholder: 'Escribe tu pregunta…'
        }
      },
      enableStreaming: false
    });

    // Botón para abrir la ventana del chat
    const openBtn = document.getElementById('openChat');
    openBtn?.addEventListener('click', () => {
      try { window.__n8nChat?.open?.(); } catch(e) { /* noop */ }
    });
  </script>
</body>
</html>
